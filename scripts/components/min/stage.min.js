(function(){define(["babylon","KeyboardJS/keyboard","c/bits"],function(t,e,n){var i;return i=function(){function i(e){this.containerID=e,this.canvas=document.getElementById(e),this.engine=new t.Engine(this.canvas,!0),this.scene=new t.Scene(this.engine),this.entities=[],this.camera=null,this.lights=[],this.spawners=[],this.tick=0}return i.prototype.height=function(){return this.canvas.height},i.prototype.width=function(){return this.canvas.width},i.prototype.uniqueID=function(){return n.ramdomStr()},i.prototype.loop=function(){var t=this;return this.engine.runRenderLoop(function(){var n,i,r,s,a,h,o,c,u,p,d,f,g;for(n=e.activeKeys(),d=t.entities,a=0,c=d.length;c>a;a++)i=d[a],i.update(t.tick,n);for(f=t.lights,h=0,u=f.length;u>h;h++)r=f[h],r.update(r);for(g=t.spawners,o=0,p=g.length;p>o;o++)s=g[o],s.update(t.tick);return t.camera.update(),t.scene.render(),t.tick++})},i.prototype.addCamera=function(t){return t.attach(this.scene,this.canvas),this.camera=t},i.prototype.addLight=function(t){return t.attach(this.scene),this.lights.push(t)},i.prototype.addEntity=function(t){return t.attach(this.scene),this.entities.push(t)},i.prototype.addSpawner=function(t){return t.attach(this.scene),this.spawners.push(t)},i}()})}).call(this);