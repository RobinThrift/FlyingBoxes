(function(){define(["babylon","lodash"],function(t,s){var o;return o=function(){function o(t,o,i,e){this.name=t,this.type=o,null==i&&(i={}),this.controls=null!=e?e:{},this.defaults={size:1,pos:[0,0,0],Xscaling:1,Yscaling:1,Zscaling:1,colour:{r:0,g:0,b:0},specularColour:{r:1,g:1,b:1},specularPower:64,animate:function(){}},this.opts=s.extend(this.defaults,i)}return o.prototype.attach=function(s){switch(this.type){case"box":this.mesh=t.Mesh.CreateBox(this.name,this.opts.size,s);break;case"plane":this.mesh=t.Mesh.CreatePlane(this.name,this.opts.size,s)}return this.mesh.scaling.x=this.opts.Xscaling,this.mesh.scaling.y=this.opts.Yscaling,this.mesh.scaling.z=this.opts.Zscaling,this.setPosition(this.opts.pos[0],this.opts.pos[1],this.opts.pos[2]),this.material=new t.StandardMaterial(""+this.name+"-material",s),this.material.diffuseColor=new t.Color3(this.opts.colour.r,this.opts.colour.g,this.opts.colour.b),this.material.specularColour=new t.Color3(this.opts.colour.r,this.opts.colour.g,this.opts.colour.b),this.material.specularPower=this.opts.specularPower,this.mesh.material=this.material},o.prototype.update=function(t,s){return null==s&&(s=[]),this.checkControls(s),this.animate(t)},o.prototype.animate=function(t){return this.opts.animate(this,t)},o.prototype.checkControls=function(t){return s.each(this.controls,function(s,o){return-1!==t.indexOf(o)?s():void 0})},o.prototype.setPosition=function(s,o,i){return null==s&&(s=0),null==o&&(o=0),null==i&&(i=0),this.mesh.position=new t.Vector3(s,o,i)},o.prototype.move=function(s,o,i){return null==s&&(s=0),null==o&&(o=0),null==i&&(i=0),this.mesh.position.addInPlace(new t.Vector3(s,o,i))},o.prototype.getPosition=function(){return this.mesh.position},o.prototype.getX=function(){return this.mesh.position.x},o.prototype.getY=function(){return this.mesh.position.y},o.prototype.getZ=function(){return this.mesh.position.z},o.prototype.destroy=function(){return this.mesh.dispose()},o}()})}).call(this);