(function(){requirejs.config({baseUrl:"/scripts/vendor",paths:{c:"../components",babylon:"babylon.1.6.0"},shim:{lodash:{exports:"_"},"KeyboardJS/keyboard.js":{exports:"KeyboardJS"},babylon:{exports:"BABYLON",deps:["hand-1.1.3"]},zepto:{exports:"$"}}}),requirejs(["babylon","KeyboardJS/keyboard","zepto","lodash","c/bits","c/stage","c/camera","c/light","c/spawner","c/bentity","c/gui/bar"],function(o,e,t,n,a,r,i,s,d,c,l){var p,g,u,b,h,y,m,f,w,x,v,P,L,j,z,O,T,B;return p=5,g=5,m=100,b=function(){return m-=1,0>=m&&(m=100),v.update(m+"%")},f=100,h=function(){return f-=1,0>=f&&(f=100),P.update(f+"%")},v=new l("player1LifeBar",{x:10,y:10,colour:"red",pos:"right",height:"35px",width:"200px"}),v.attach(),P=new l("player2LifeBar",{x:10,y:10,colour:"green",pos:"left",height:"35px",width:"200px"}),P.attach(),B=new r("screen"),L=new c("player","box",{size:.4,pos:[1,-3.5,0],Zscaling:.3,Xscaling:2,Yscaling:1.1,colour:{r:1,g:0,b:.23}},{left:function(){return L.getPosition().x>-p?L.move(-.2):void 0},right:function(){return L.getPosition().x<g?L.move(.2):void 0}},j=new c("player2","box",{size:.4,pos:[-1,-3.5,0],Zscaling:.3,Xscaling:2,Yscaling:1.1,colour:{r:.1,g:1,b:.1}},{a:function(){return j.getPosition().x>-p?j.move(-.2):void 0},d:function(){return j.getPosition().x<g?j.move(.2):void 0}}),u=new c("bgPlane","plane",{size:100,pos:[0,0,20],specularColour:{r:1,g:0,b:.23},colour:{r:1,g:.4,b:.1}})),w=new i("mainCam","free",{pos:[0,0,-10],controls:!1}),x=new s("hemi","mainLight",{pos:[0,0,0],colour:a.rgbToFloatObj(144,202,97)}),x.update=function(){},z=new s("spot","spot1",{pos:[-3,-2,-2],to:[0,-1.5,2],debug:!1,angle:10,decay:10,colour:a.rgbToFloatObj(221,0,0)}),O=new s("spot","spot2",{pos:[0,-2,-2],to:[0,-1.5,2],debug:!1,angle:10,decay:10,colour:a.rgbToFloatObj(255,0,255)}),T=new s("spot","spot3",{pos:[3,-2,-2],to:[0,-1.5,2],debug:!1,angle:10,decay:10,colour:a.rgbToFloatObj(0,0,255)}),y=new d({limit:200,interval:30,emit:function(o,e,t,n,r){var i,s,d,l,p;for(l=0,p=e.length;p>l;l++)i=e[l],t>n&&(d=new c("b",i.type,i),r.push(d),B.addEntity(d),s=a.randInt(0,3),Math.random()>.5||(s=-s),d.setPosition(s,10,0),n++);return n},update:function(e){var t;return L.mesh.intersectsMesh(e.mesh,!1)&&b(),j.mesh.intersectsMesh(e.mesh,!1)&&h(),e.mesh.rotation.addInPlace(new o.Vector3(-.1,-.1,-.01)),e.getPosition().y>-8?e.move(0,-.15,0):(t=a.randInt(0,10),Math.random()>.5||(t=-t),e.setPosition(t,10,0))}}),y.addToPool({type:"box",size:.2,pos:[0,0,0],Zscaling:1,Xscaling:1,Yscaling:1,colour:{r:.1,g:.23,b:1}}),B.addSpawner(y),B.addCamera(w),B.addLight(x),B.addLight(z),B.addLight(O),B.addLight(T),B.addEntity(L),B.addEntity(j),B.addEntity(u),B.loop()})}).call(this);